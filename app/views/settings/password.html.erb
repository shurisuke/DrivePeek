<div class="auth-page">
  <div class="auth-card">
    <div class="auth-header">
      <%= link_to settings_path, class: "auth-back-link" do %>
        <i class="bi bi-chevron-left"></i>
      <% end %>
      <h2 class="auth-title">パスワード変更</h2>
    </div>

    <div class="settings-section">
      <div class="settings-info-block">
        <span class="settings-info-label">登録済みメールアドレス</span>
        <span class="settings-info-value"><%= current_user.email %></span>
      </div>

      <%# パスワードリセット確認待ち（30分以内） %>
      <% if current_user.reset_password_sent_at.present? && current_user.reset_password_sent_at > 30.minutes.ago %>
        <div class="settings-pending-email">
          <i class="bi bi-envelope-exclamation"></i>
          <div>
            <p class="settings-pending-email-title">確認待ち（残り<%= remaining_minutes(current_user.reset_password_sent_at) %>分）</p>
            <p class="settings-pending-email-hint">再設定メールのリンクをクリックしてパスワードを変更してください</p>
          </div>
        </div>
      <% end %>

      <hr class="settings-divider">

      <ol class="settings-steps">
        <li>下のボタンで再設定用メールを送信</li>
        <li>メール内のリンクをクリック</li>
        <li>新しいパスワードを入力して変更完了</li>
      </ol>

      <%= form_with url: user_password_path, method: :post, scope: :user do |f| %>
        <%= f.hidden_field :email, value: current_user.email %>
        <%= f.submit "再設定メールを送信", class: "auth-submit" %>
      <% end %>
    </div>
  </div>
</div>
