<% content_for :body_class, "no-footer" %>

<div class="main-content plan-form">
  <!-- 地図 -->
  <div id="map" class="map" data-plan-id="<%= plan.id %>"></div>

  <!-- 🔍 検索バー（地図上部に重ねる用） -->
  <div class="map-search-box">
    <input
      id="places-search-box"
      type="text"
      placeholder="スポット名や施設名で検索"
      class="form-control"
    >
  </div>

  <!-- 左ナビバー（Turbo Frame化） -->
  <%= turbo_frame_tag "planbar" do %>
    <%= render "plans/form_components/planbar", plan: plan %>
  <% end %>

  <!-- ✅ 時計ボタン＋白背景（固定・スクロールに巻き込まれない） -->
  <div class="plan-time-toggle-header"
       data-controller="plan-time-toggle"
       data-plan-time-toggle-planbar-selector-value=".planbar">
    <button type="button"
            class="plan-time-fab"
            aria-label="時間表示のオン/オフ"
            aria-pressed="false"
            data-action="click->plan-time-toggle#toggle">
      <%= image_tag "clock.png",
                    class: "plan-time-fab__icon",
                    alt: "",
                    aria: { hidden: true } %>
    </button>
  </div>

  <!-- プラン保存ボタン -->
  <div class="plan-save">
    <%= button_to "プランを保存", plans_path, method: :post, class: "btn btn-save" %>
  </div>

  <!-- 右下: プラン情報 -->
  <div class="plan-info">
    <p>走行距離: 120km</p>
    <p>EC料金: ¥3,200</p>
    <p>移動時間: 2時間30分</p>
  </div>

  <!-- 右ズームボタン -->
  <div class="map-controls">
    <button class="zoom-btn in">＋</button>
    <button class="zoom-btn out">−</button>
  </div>
</div>
