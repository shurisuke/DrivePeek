<% content_for :body_class, "no-footer" %>

<div class="main-content plan-form"
     data-controller="ui--navibar-resize suggestion-tab--area-draw"
     data-ui--navibar-resize-min-value="300"
     data-ui--navibar-resize-max-percent-value="80"
     data-ui--navibar-resize-default-value="350">
  <!-- åœ°å›³ -->
  <div id="map" class="map" data-map-mode="edit" data-plan-id="<%= plan.id %>" data-ui--navibar-resize-target="map"></div>

  <!-- ðŸ” æ¤œç´¢ãƒãƒ¼ï¼ˆåœ°å›³ä¸Šéƒ¨ã«é‡ã­ã‚‹ç”¨ï¼‰ -->
  <div class="map-search-box">
    <input
      id="places-search-box"
      type="text"
      placeholder="åœ°åã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢"
      class="form-control"
    >
  </div>

  <!-- åœ°å›³ä¸Šã®ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ç¾¤ -->
  <div class="map-floating-buttons">
    <!-- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ -->
    <button type="button"
            id="community-preview-close"
            class="map-floating-btn map-floating-btn--blue"
            hidden
            title="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"
            data-controller="community-tab--plan-preview"
            data-action="click->community-tab--plan-preview#hide">
      <i class="bi bi-x-lg" aria-hidden="true"></i>
      <i class="bi bi-share" aria-hidden="true"></i>
    </button>

    <!-- æ¤œç´¢çµæžœã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ -->
    <button type="button"
            id="search-hit-clear"
            class="map-floating-btn map-floating-btn--red"
            hidden
            title="æ¤œç´¢çµæžœã‚’ã‚¯ãƒªã‚¢"
            data-controller="ui--search-hit-clear"
            data-action="click->ui--search-hit-clear#clear">
      <i class="bi bi-x-lg" aria-hidden="true"></i>
      <i class="bi bi-search" aria-hidden="true"></i>
    </button>

    <!-- ææ¡ˆãƒ”ãƒ³ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ -->
    <button type="button"
            id="suggestion-pin-clear"
            class="map-floating-btn map-floating-btn--purple"
            hidden
            title="ææ¡ˆãƒ”ãƒ³ã‚’ã‚¯ãƒªã‚¢"
            data-controller="suggestion-tab--pin-clear"
            data-action="click->suggestion-tab--pin-clear#clear">
      <i class="bi bi-x-lg" aria-hidden="true"></i>
      <i class="bi bi-stars" aria-hidden="true"></i>
    </button>
  </div>

  <!-- å·¦ãƒŠãƒ“ãƒãƒ¼ï¼ˆTurbo FrameåŒ–ï¼‰ -->
  <%= turbo_frame_tag "navibar" do %>
    <%= render "plans/navibar", plan: plan %>
  <% end %>

  <!-- ãƒŠãƒ“ãƒãƒ¼ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ« -->
  <div class="navibar-resize-handle"
       data-ui--navibar-resize-target="handle"
       data-action="mousedown->ui--navibar-resize#startResize touchstart->ui--navibar-resize#startResize click->ui--navibar-resize#handleClick">
    <div class="navibar-resize-handle__grip"></div>
  </div>

  <%# ææ¡ˆã‚¨ãƒªã‚¢æç”»ãƒ¢ãƒ¼ãƒ€ãƒ« %>
  <%= render "suggestions/area_draw_modal" %>

  <%# ææ¡ˆæ¡ä»¶è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« %>
  <%= render "suggestions/condition_modal", plan: plan %>
</div>

<%# InfoWindowã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆJSã‹ã‚‰å‚ç…§ï¼‰ %>
<%= render "map/infowindow_skeleton" %>

<%# ãƒ¢ãƒã‚¤ãƒ«ç”¨InfoWindowãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ %>
<div id="mobile-infowindow"
     class="mobile-infowindow"
     data-controller="infowindow--mobile"
     hidden>
  <div class="mobile-infowindow__sheet" data-infowindow--mobile-target="sheet">
    <div class="mobile-infowindow__handle" data-infowindow--mobile-target="handle">
      <div class="mobile-infowindow__handle-bar"></div>
    </div>
    <div class="mobile-infowindow__content" id="mobile-infowindow-content">
      <%# InfoWindow ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã‚‹ï¼ˆé–‰ã˜ã‚‹ãƒœã‚¿ãƒ³å«ã‚€ï¼‰ %>
    </div>
  </div>
</div>
