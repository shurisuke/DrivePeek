<% content_for :body_class, "no-footer" %>

<div class="main-content plan-form"
     data-controller="navibar-resize"
     data-navibar-resize-min-value="300"
     data-navibar-resize-max-percent-value="80"
     data-navibar-resize-default-value="350">
  <!-- åœ°å›³ -->
  <div id="map" class="map" data-map-mode="edit" data-plan-id="<%= plan.id %>" data-navibar-resize-target="map"></div>

  <!-- ğŸ” æ¤œç´¢ãƒãƒ¼ï¼ˆåœ°å›³ä¸Šéƒ¨ã«é‡ã­ã‚‹ç”¨ï¼‰ -->
  <div class="map-search-box">
    <input
      id="places-search-box"
      type="text"
      placeholder="åœ°åã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢"
      class="form-control"
    >
  </div>

  <!-- åœ°å›³ä¸Šã®ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ç¾¤ -->
  <div class="map-floating-buttons">
    <!-- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ -->
    <button type="button"
            id="community-preview-close"
            class="map-floating-btn map-floating-btn--blue"
            hidden
            title="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"
            data-controller="community-plan-preview"
            data-action="click->community-plan-preview#hide">
      <i class="bi bi-x-lg" aria-hidden="true"></i>
      <i class="bi bi-share" aria-hidden="true"></i>
    </button>

    <!-- æ¤œç´¢çµæœã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ -->
    <button type="button"
            id="search-hit-clear"
            class="map-floating-btn map-floating-btn--red"
            hidden
            title="æ¤œç´¢çµæœã‚’ã‚¯ãƒªã‚¢"
            data-controller="search-hit-clear"
            data-action="click->search-hit-clear#clear">
      <i class="bi bi-x-lg" aria-hidden="true"></i>
      <i class="bi bi-search" aria-hidden="true"></i>
    </button>
  </div>

  <!-- å·¦ãƒŠãƒ“ãƒãƒ¼ï¼ˆTurbo FrameåŒ–ï¼‰ -->
  <%= turbo_frame_tag "navibar" do %>
    <%= render "plans/navibar", plan: plan %>
  <% end %>

  <!-- ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ« -->
  <div class="navibar-resize-handle"
       data-navibar-resize-target="handle"
       data-action="mousedown->navibar-resize#startResize touchstart->navibar-resize#startResize click->navibar-resize#handleClick">
    <div class="navibar-resize-handle__grip"></div>
  </div>

  <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼ˆä¿å­˜ãƒ»å…±æœ‰ï¼‰ -->
  <div class="plan-actions"
       data-controller="plan-save-modal"
       data-plan-save-modal-plan-id-value="<%= plan.id %>"
       data-plan-save-modal-title-value="<%= plan.title %>">
    <div class="plan-actions__buttons">
      <button type="button"
              class="btn btn-action btn-action--share"
              data-controller="share-modal"
              data-share-modal-url-value="<%= plan_url(plan) %>"
              data-share-modal-plan-id-value="<%= plan.id %>"
              data-action="click->share-modal#open">
        å…±æœ‰
      </button>
      <button type="button"
              class="btn btn-action btn-action--save"
              data-action="click->plan-save-modal#open">
        ä¿å­˜
      </button>
    </div>
  </div>

</div>
