<%# app/views/plans/_goal_point_block_edit.html.erb %>
<%# 帰宅地点ブロック（親の plan-tab-wrapper コントローラーから制御される） %>
<% plan ||= @plan %>
<% goal_point = plan.goal_point %>

<div data-plan-tab--goal-point-visibility-target="blockArea" hidden>
  <div class="goal-point-block"
       data-lat="<%= goal_point&.lat %>"
       data-lng="<%= goal_point&.lng %>"
       data-plan-tab--time-rail-sync-target="content"
       data-time-rail-sync="goal-point">
    <%# ✅ 上部：帰宅コンテンツ %>
    <div class="goal-content">
      <%# 3層構造: アイコン | タイトル | スペーサー %>
      <div class="goal-header">
        <span class="goal-icon"
              data-controller="ui--navibar-marker-button"
              data-point-type="goal"
              data-action="click->ui--navibar-marker-button#point"
              role="button"
              tabindex="0"
              aria-label="帰宅地点を地図で表示"></span>

        <span class="goal-title goal-title--clickable"
              data-controller="ui--navibar-marker-button"
              data-point-type="goal"
              data-action="click->ui--navibar-marker-button#point"
              role="button"
              tabindex="0">帰宅</span>

        <div class="goal-spacer" aria-hidden="true"></div>
      </div>

      <%# 住所 %>
      <div class="goal-address navibar-padding">
        <i class="bi bi-geo-alt"></i>
        <%= goal_point&.display_address.presence || "帰宅地点が未設定です" %>
      </div>
    </div>
  </div>
</div>
