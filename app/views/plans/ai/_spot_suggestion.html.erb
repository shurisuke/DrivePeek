<%# AI提案スポットカード %>
<%# locals: spot:, plan:, number: 1, show_description: false %>
<div class="ai-spot-card"
     data-controller="ai-spot-action"
     data-ai-spot-action-name-value="<%= spot[:name] %>"
     data-ai-spot-action-address-value="<%= spot[:address] %>"
     data-ai-spot-action-plan-id-value="<%= plan&.id %>"
     data-ai-spot-action-number-value="<%= number %>"
     data-ai-spot-action-auto-show-value="false">
  <div class="ai-spot-card__header">
    <span class="ai-spot-card__number"><%= number %></span>
    <span class="ai-spot-card__name"><%= spot[:name] %></span>
  </div>
  <div class="ai-spot-card__address"><i class="bi bi-geo-alt"></i><%= spot[:address] %></div>

  <% if local_assigns[:show_description] && spot[:description].present? %>
    <% parts = split_spot_description(spot[:description]) %>
    <div class="ai-spot-card__summary"><%= parts[:summary] %></div>
    <% if parts[:details].present? %>
      <div class="ai-spot-card__description">
        <%= Kramdown::Document.new(parts[:details], hard_wrap: true).to_html.html_safe %>
      </div>
    <% end %>
  <% end %>

  <div class="ai-spot-card__actions">
    <button type="button"
            class="ai-spot-card__link"
            data-action="click->ai-spot-action#showOnMap">
      地図で見る
    </button>
    <button type="button"
            class="ai-spot-card__link ai-spot-card__link--primary"
            data-action="click->ai-spot-action#addToPlan"
            data-ai-spot-action-target="addBtn">
      プランに追加
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>
