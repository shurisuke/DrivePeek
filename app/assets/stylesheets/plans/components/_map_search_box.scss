/* ==========================================
     地図上の検索ボックス
========================================== */
.map-search-box {
    position: absolute;
    top: 10px;
    /* 地図の中央に配置: planbar幅 + 地図幅の半分 - 30px */
    left: calc(var(--planbar-width) + (100% - var(--planbar-width)) / 2 - 30px);
    transform: translateX(-50%);
    z-index: 10;
    width: min(600px, calc((100% - var(--planbar-width)) * 0.6));

  input.form-control {
    width: 100%;
    padding: 0.6rem 1rem;
    border-radius: 6px;
    font-size: 1rem;
    border: 1px solid #9a9a9a;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  }
}

/* プランタブ選択時（時計アイコン表示時）：レール幅の半分を考慮 */
body.no-footer .plan-form:has(.plan-time-toggle-header:not([hidden])) .map-search-box {
  left: calc(var(--planbar-width) + var(--rail-width) / 2 + (100% - var(--planbar-width) - var(--rail-width) / 2) / 2 - 30px);
  width: min(600px, calc((100% - var(--planbar-width) - var(--rail-width) / 2) * 0.6));
}

/* 収納時：ハンドル幅のみ考慮 */
body.no-footer .plan-form.planbar--collapsed .map-search-box {
  left: calc(var(--planbar-collapsed-handle-width) + (100% - var(--planbar-collapsed-handle-width)) / 2 - 30px);
  width: min(600px, calc((100% - var(--planbar-collapsed-handle-width)) * 0.6));
}

/* プランバーが80%を超えたら検索バー・保存ボタンを非表示 */
body.no-footer .plan-form.planbar--wide .map-search-box,
body.no-footer .plan-form.planbar--wide .plan-save {
  display: none;
}